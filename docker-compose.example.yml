version: '3'
services:
  postgres:
    container_name: postgres
    image: postgres:latest
    environment:
      POSTGRES_DB: postgres
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    restart: always
    ports:
      - "5432:5432"
  vk-bot:
    container_name: zammad-bot
    image: chazari/zammad-vk-bot:latest
    environment:
      VK_TOKEN: token
      VK_API_HREF: https://api.vk.com
      ZAMMAD_TOKEN: token
      ZAMMAD_HREF: href
      WEBHOOK_SECRET_KEY: secret
      WEBHOOK_PORT: :8181
      POSTGRES_DB: postgres
      POSTGRES_USER: postgres
      POSTGRES_PORT: "5432"
      POSTGRES_HOST: postgres # postgres container_name
      POSTGRES_PASS: password
    depends_on:
      - postgres
    restart: always
    command: ["/app/main", "vk-bot"]
